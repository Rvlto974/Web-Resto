<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>3. MCD - Vite & Gourmand</title>
    <script src="https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js"></script>
    <style>
        @media print {
            body { margin: 0; padding: 20px; }
            .no-print { display: none; }
        }
        body {
            font-family: 'Segoe UI', Tahoma, sans-serif;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
            background: white;
        }
        h1 {
            color: #5DA99A;
            text-align: center;
            font-size: 24px;
            margin-bottom: 10px;
        }
        .subtitle {
            text-align: center;
            color: #666;
            margin-bottom: 30px;
        }
        .mermaid {
            text-align: center;
        }
        .nav {
            text-align: center;
            margin-top: 30px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
        }
        .nav a {
            color: #5DA99A;
            margin: 0 10px;
            text-decoration: none;
        }
        .nav a:hover { text-decoration: underline; }
    </style>
</head>
<body>
    <h1>3. MCD - Modele Conceptuel de Donnees</h1>
    <p class="subtitle">Schema de la base de donnees MySQL</p>

    <div class="mermaid">
erDiagram
    UTILISATEUR ||--o{ COMMANDE : passe
    UTILISATEUR ||--o{ AVIS : redige
    MENU ||--o{ COMMANDE_ITEM : concerne
    MENU ||--o{ AVIS : recoit
    MENU ||--|{ MENU_PLAT : contient
    PLAT ||--|{ MENU_PLAT : compose
    PLAT ||--o{ PLAT_ALLERGENE : possede
    ALLERGENE ||--o{ PLAT_ALLERGENE : concerne
    COMMANDE ||--|{ COMMANDE_ITEM : contient

    UTILISATEUR {
        int id PK
        string email UK
        string nom
        string prenom
        string mot_de_passe
        enum role
        boolean actif
    }

    MENU {
        int id PK
        string titre
        text description
        decimal prix_base
        int min_personnes
        boolean disponible
        string image
    }

    COMMANDE {
        int id PK
        string numero UK
        int utilisateur_id FK
        decimal prix_total
        enum statut
        date date_livraison
        time heure_livraison
    }

    COMMANDE_ITEM {
        int id PK
        int commande_id FK
        int menu_id FK
        int nb_personnes
        decimal prix_unitaire
        decimal prix_total
    }

    AVIS {
        int id PK
        int utilisateur_id FK
        int menu_id FK
        int note
        text commentaire
        boolean approuve
    }

    PLAT {
        int id PK
        string nom
        text description
        enum categorie
        string image
    }

    ALLERGENE {
        int id PK
        string nom
        string icone
    }

    MENU_PLAT {
        int menu_id PK
        int plat_id PK
    }

    PLAT_ALLERGENE {
        int plat_id PK
        int allergene_id PK
    }
    </div>

    <div class="nav no-print">
        <a href="2-classes.html">&larr; Precedent: Classes</a>
        <a href="4-sequence-commande.html">Suivant: Sequence Commande &rarr;</a>
    </div>

    <script>mermaid.initialize({ startOnLoad: true, theme: 'default' });</script>
</body>
</html>
